import{i as ne}from"../index/index.ac5a7abe.js";import{_ as ae,r as U,e as K,o as oe,c as y,f as ie,h as N,F as $,m as F,v as Q,x as T,g as S,a as v,t as W,q as re,s as ce,p as ue}from"../../assets/index.ad0d128b.js";const me=B=>(re("data-v-2615817f"),B=B(),ce(),B),pe={key:0,class:"header"},he={class:"cell-item--label"},fe=me(()=>N("section",{class:"chart-container"},[N("div",{id:"grid-line",class:"chart-container__inner"})],-1)),de={key:1,class:"footer"},ge={class:"cell-item--label"},xe={__name:"record",setup(B){const p=U(null),M=K(()=>!p||!p.value||!p.value.canvasConfig?100:p.value.canvasConfig.left||100),R=K(()=>{if(p&&p.value&&p.value.grid){const{top:t,right:w,bottom:_,left:e,width:b}=p.value.grid;return{padding:`${t}px ${w}px ${_}px ${e}px`,width:`${b}px`}}return null}),J=U(["2020-10-24","2020-10-25","2020-10-26","2020-10-27","2020-10-28","2020-10-29","2020-10-30","2020-10-31","2020-11-01","2020-11-02","2020-11-03","2020-11-04","2020-11-05","2020-11-06"]),z=U({grid:{width:595,height:842},graphicStroke:"#999",margin:{left:8,right:8,top:8,bottom:8},dateNum:5,rows:5,columns:6,startMoment:2,userDetails:[{value:"\u5F20\u4E09",source:"\u59D3\u540D",nickname:"\u59D3\u540D"},{value:"2020/10/24",source:"\u5165\u9662\u65E5\u671F",nickname:"\u5165\u9662\u65E5\u671F"},{value:"\u9AA8\u79D1",source:"\u79D1\u5BA4",nickname:"\u79D1\u5BA4"},{value:"\u9AA8\u79D1\u75C5\u533A",source:"\u75C5\u533A",nickname:"\u75C5\u533A"},{value:"001",source:"\u5E8A\u53F7",nickname:"\u5E8A\u53F7"},{value:"202010240098",source:"\u4F4F\u9662\u53F7",nickname:"\u4F4F\u9662\u53F7"}],normalHeader:[{name:"\u65E5\u671F",nickname:"\u65E5\u671F",visible:!0},{name:"\u4F4F\u9662\u65E5\u6570",nickname:"\u4F4F\u9662\u65E5\u6570",visible:!0},{name:"\u624B\u672F\u540E\u65E5\u6570",nickname:"\u672F\u540E\u65E5\u6570",visible:!0}],curves:[{name:"\u8109\u640F",max:180,min:20,alertMax:120,alertMin:50,visible:!0,color:"#2D5AFA",unit:"\u6B21/\u5206",step:20,series:{symbol:"triangle",connectNulls:!1,data:[142,144.9,147,123.2,125.6,156.7,135.6,162.2,132.6,120,116.4,130.3]}},{name:"\u4F53\u6E29",max:42,min:34,alertMax:38,alertMin:35,visible:!0,color:"#EC0000",unit:"\u2103",step:1,series:{symbol:"rect",connectNulls:!1,data:[36.6,35.9,39,null,38.7,37.7,37.6,38.2,38.7,38.8,36,38.3]}},{name:"\u547C\u5438",max:90,min:0,alertMax:30,alertMin:10,visible:!1,color:"#2D5AFA",unit:"\u6B21/\u5206",step:20,series:{symbol:"rect",connectNulls:!1,data:[66,56,56,68,70,67,53,67,64,66,67,58]}}],specialProj:[{name:"\u547C\u5438",splitNum:6,unit:"\u6B21/\u5206"},{name:"\u8840\u538B",splitNum:2,unit:"mmHg"},{name:"\u5165\u91CF",unit:"ml",splitNum:1},{name:"\u51FA\u91CF",unit:"ml",splitNum:1},{name:"\u5927\u4FBF",unit:"\u6B21/\u65E5",splitNum:1},{name:"\u5C0F\u4FBF",unit:"\u6B21/\u65E5",splitNum:1},{name:"\u4F53\u91CD",unit:"kg",splitNum:1},{name:"\u8EAB\u9AD8",unit:"cm",splitNum:1},{name:"\u5F15\u6D41\u91CF",unit:"ml",splitNum:1},{name:"\u5907\u6CE8",unit:"",splitNum:1}]}),Z=()=>{const t=()=>{const{normalHeader:a,dateNum:l}=z.value;return[{label:a.filter(({visible:s})=>s).map(({nickname:s})=>s),cellColumns:l,columnsData:J.value.slice(0,l).map(s=>s.replace("2020-",""))}]},w=()=>{const{userDetails:a}=z.value;return a.map(({nickname:l,value:s})=>({label:l,value:s}))},_=()=>{const{specialProj:a,dateNum:l}=z.value;return a.map(({name:s,unit:g,splitNum:k})=>({label:[`${s}${g?`(${g})`:""}`],cellColumns:l*k}))},e=()=>z.value.curves.filter(({visible:a})=>a),b=()=>{const{dateNum:a,columns:l,startMoment:s}=z.value;let g="";const k=m=>`${m<10?`${m}`:m},`;for(let m=0;m<l;m+=1){const u=s+24/l*m;u===24?g+=k(0):u>24?g+=k(u-24):g+=k(u)}return g.repeat(a).split(",").filter(m=>m)},r=t(),D=w(),L=e(),d=_(),c=b();return{headerTableData:r,userDetails:D,yAxisData:L,footerTableData:d,moments:c,xAxisData:J.value}},ee=(t,w=[],_)=>{const e={type:"line",cursor:"auto"},b={x1:0,y1:0,x2:0,y2:0},{moments:r,graphic:D,columns:L}=t,d=r.length,c=1,a=t.width-t.left,l=(a-d*c)/d,s=[[{name:"\u65F6\u95F4",color:"#000"}],w,_],g=({lineStyle:n,cellColumns:h,spacing:i})=>{const f=[];for(let o=0;o<h;o+=1)f.push({...e,top:o*(i+c)-2*c,left:o<=1?-2:t.left-1,style:{stroke:n.stroke||D.stroke,lineWidth:c},shape:{...b,x2:n.length+(o<=1?t.left+1:0)}});return f},k=({top:n,leftSpace:h,lineStyle:i,cellColumns:f})=>{const o=[];for(let x=0;x<f;x+=1)o.push({...e,top:n===void 0?-2:n,left:h+x*(l+c)-2*c,style:{stroke:x&&Number.isInteger(x/L)?"red":i.stroke||D.stroke,lineWidth:c},shape:{...b,y1:i.length}});return o},m=({data:n=[],fill:h="#000",top:i=0,left:f=0,fontSize:o=12,spacing:x})=>{const I=[];for(let A=0;A<n.length;A+=1){const X=/.*[^x00-xFF]+.*/.test(n[A]),q=(o>=12?12:o)/2/(X?2:1),Y=n[A].replace(/[^x00-xFF]/g,"--").length/2*q;I.push({type:"text",top:i||0,left:f+x*(A+.5)+(A+.5)*c-Y,cursor:"auto",style:{text:n[A],x:0,y:0,fill:h||"#000",font:`${o>=12?12:o}px "Microsoft YaHei", sans-serif`,stroke:null,lineWidth:0}})}return I},u=20,C=(n,h)=>{const i=u/2-h/2+c,f=[];for(let o=0;o<n.length;o+=1){const x=n[o],I=x.length;for(let A=0;A<I;A+=1){const{name:X,top:q=0}=x[A],Y=t.left/I;f.push(...m({data:[X],fill:"#000",fontSize:h,spacing:Y,left:Y*A-h/2,top:u*o+i+q}))}}return f},H=n=>{const h=[];for(let i=1;i<=n;i+=1)h.push(...k({leftSpace:t.left/n*i,top:u-1,lineStyle:{length:a,width:1,stroke:"#000"},cellColumns:1}));return h},E=g({lineStyle:{length:a,stroke:"#000"},spacing:u,cellColumns:2}),P=k({leftSpace:t.left,lineStyle:{length:a,width:1},cellColumns:d}),j=(()=>{const n=l-2,h=[];for(let i=0;i<r.length;i+=1)h.push(...m({data:[r[i]],fill:"#000",left:t.left+i*(c+l),top:n>=12?12/2:(20-n)/2,fontSize:n,spacing:l}));return h})(),V=H(s[1].length),O=C(s,20/2);return[...E,...P,...V,...j,...O]},te=()=>{const{canvasConfig:t}=p.value,w=({moments:d,columns:c,xAxisData:a})=>{const l=[];for(let s=0;s<d.length;s+=1){const g=Math.floor(s/c);l.push(`${a[g]||"0000-00-00"} ${d[s]||"00"}:00`)}return l},_=d=>{const c=[],a=[],l=[],s=[];return d.forEach((g,k)=>{const{name:m,max:u=1,min:C=1,step:H=1,series:E=[],color:P="#000",unit:G=""}=g,j=(u-C)/H,V=t.left/d.length*(d.length-k-1);s.push(P),l.push({name:G?`(${G})`:"",top:-14}),c.push({type:"value",name:m,color:P,top:-4,nameTextStyle:{color:"transparent"},min:C,max:u,interval:(u-C)/j/(t.rows||1),position:"left",offset:V,splitLine:{lineStyle:{color:t.graphic.stroke}},axisTick:{show:!1},axisLine:{show:!1},axisLabel:{color:"#000",margin:5,formatter:function(f){return f%H!==0||f===u||f===C?"":f}}});const{connectNulls:O,data:n,symbol:h}=E,i={name:m,type:"line",connectNulls:O,data:n,animation:!1,symbolSize:6,symbol:h,yAxisIndex:k};if(m==="\u4F53\u6E29"){const f=()=>{const o=[];for(let x=C;x<=u-1;x+=1)o.push({yAxis:x,lineStyle:{color:x===37?"red":"#000"}});return o};i.markLine={animation:!1,symbolSize:0,lineStyle:{type:"solid",width:2},data:f()}}a.push(i)}),{color:s,yAxis:c,units:l,series:a}},{yAxis:e,units:b,series:r,color:D}=_(t.yAxisData),L=ee(t,e,b);return{tooltip:{trigger:"axis",axisPointer:{type:"cross"}},grid:{left:t.left,right:0,top:20,bottom:0},color:D,graphic:[...L,{type:"group",rotation:Math.PI/4,bounding:"raw",right:110,bottom:110,z:100,children:[{type:"rect",left:"center",top:"center",z:100,shape:{width:400,height:30},style:{fill:"rgba(0,0,0,0.25)"}},{type:"text",left:"center",top:"center",z:100,style:{fill:"#fff",text:"Frontend By zhanyi233",font:"bold 18px Microsoft YaHei"}}]}],xAxis:[{type:"category",splitLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},data:w(t)}],yAxis:e,series:r}},se=()=>{const t=ne(document.getElementById("grid-line")),w=te();t.setOption(w),window.addEventListener("resize",()=>{t.resize()})},le=()=>{const t=Z(),w={...z.value,...t},{margin:_={},grid:e={},header:b={},dateNum:r=1,columns:D=1,rows:L=1,yAxisData:d=[],headerTableData:c={},userDetails:a=[],footerTableData:l=[],moments:s=[],graphicStroke:g="#999",xAxisData:k=[]}=w,m=e.width-_.left-_.right-4,u=d.length,C={header:b,grid:{...e,..._},userDetails:a,canvasConfig:{dateNum:r,rows:L,columns:D,width:m,left:u>1?u*40:50,moments:s,graphic:{stroke:g},xAxisData:k,yAxisData:d},headerTableData:c,footerTableData:l};p.value=C,p.value&&se()};return oe(()=>{le()}),(t,w)=>{const _=ue("v-message");return v(),y($,null,[ie(_,{title:"\u6E29\u99A8\u63D0\u793A",desc:"\u4EC5\u4F9B\u53C2\u8003\uFF5E \u5982\u6709\u9700\u8981\u53EF\u90AE\u4EF6\u8054\u7CFB\uFF5E"}),N("div",{class:"preview-record",style:T(S(R))},[p.value&&p.value.headerTableData?(v(),y("header",pe,[(v(!0),y($,null,F(p.value.headerTableData,(e,b)=>(v(),y("section",{class:"sample-table",key:b},[N("section",{class:"label-columns",style:T(`width:${S(M)||70}px;`)},[N("ul",{class:"label-list",style:T(`width:${S(M)||70}px;`)},[(v(!0),y($,null,F(e.label,(r,D)=>(v(),y("li",{key:D,class:"label-list-item"},W(r),1))),128))],4)],4),N("section",{class:"cell-columns",style:T(`width:calc(100% - ${S(M)||70}px);`)},[(v(!0),y($,null,F(e.label.length*e.cellColumns,r=>(v(),y("div",{key:r,class:"cell-item",style:T(`width: calc(100% / ${e.cellColumns})`)},[N("span",he,W(e&&e.columnsData&&e.columnsData.length&&e.columnsData[r-1]||""),1)],4))),128))],4)]))),128))])):Q("",!0),fe,p.value&&p.value.footerTableData?(v(),y("footer",de,[(v(!0),y($,null,F(p.value.footerTableData,(e,b)=>(v(),y("section",{class:"sample-table",key:b},[N("section",{class:"label-columns",style:T(`width:${S(M)||70}px;`)},[N("ul",{class:"label-list",style:T(`width:${S(M)||70}px;`)},[(v(!0),y($,null,F(e.label,(r,D)=>(v(),y("li",{key:D,class:"label-list-item"},W(r),1))),128))],4)],4),N("section",{class:"cell-columns",style:T(`width:calc(100% - ${S(M)||70}px);`)},[(v(!0),y($,null,F(e.label.length*e.cellColumns,r=>(v(),y("div",{key:r,class:"cell-item",style:T(`width: calc(100% / ${e.cellColumns})`)},[N("span",ge,W(e&&e.columnsData&&e.columnsData.length&&e.columnsData[r-1]||""),1)],4))),128))],4)]))),128))])):Q("",!0)],4)],64)}}},_e=ae(xe,[["__scopeId","data-v-2615817f"]]);export{_e as default};
